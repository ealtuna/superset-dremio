FROM preset/superset
USER root
RUN curl https://packages.microsoft.com/keys/microsoft.asc | apt-key add -
RUN apt-get update -y
RUN apt-get install -y unixodbc-dev unixodbc-bin unixodbc
RUN apt-get install -y alien
RUN wget https://download.dremio.com/odbc-driver/1.4.2.1003/dremio-odbc-1.4.2.1003-1.x86_64.rpm
RUN alien -k -i dremio-odbc-1.4.2.1003-1.x86_64.rpm --scripts
RUN apt-get update -y
RUN git clone https://github.com/wschroederga/sqlalchemy_dremio.git && \
    cd sqlalchemy_dremio  && \
    make clean  && \
    python3 setup.py sdist  && \
    python3 setup.py bdist_wheel  && \
    ls -l dist  && \
# Install Package
    apt install unixodbc-dev -y  && \
    python3 setup.py install
RUN pip install pyodbc && pip install sqlalchemy_dremio && pip install dremio_client[full]
USER superset
